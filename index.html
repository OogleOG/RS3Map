<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RS3 Map Viewer & Tools</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a2e;
            color: #eee;
            min-height: 100vh;
        }
        .header {
            background: linear-gradient(135deg, #0f3460 0%, #1a1a2e 100%);
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #e94560;
        }
        .header h1 {
            color: #e94560;
            font-size: 2em;
            margin-bottom: 10px;
        }
        .header p { color: #888; }
        .main-content {
            display: flex;
            min-height: calc(100vh - 120px);
        }
        .map-container {
            flex: 1;
            position: relative;
            background: #0f0f1a;
        }
        .map-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .sidebar {
            width: 340px;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
            border-left: 2px solid #0f3460;
            overflow-y: auto;
            padding: 15px;
        }
        .section {
            background: rgba(15, 52, 96, 0.3);
            border: 1px solid #0f3460;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .section-title {
            color: #e94560;
            font-size: 0.85em;
            font-weight: bold;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .coords-display {
            background: linear-gradient(135deg, #0f3460 0%, #1a1a2e 100%);
            border: 2px solid #e94560;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .coords-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 12px;
        }
        .coord-box {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 10px;
        }
        .coord-label {
            color: #888;
            font-size: 0.7em;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        .coord-value {
            color: #4ecca3;
            font-family: 'Consolas', monospace;
            font-size: 1.3em;
            font-weight: bold;
        }
        .coord-input {
            width: 100%;
            padding: 10px;
            background: #0f0f1a;
            border: 1px solid #0f3460;
            border-radius: 6px;
            color: #4ecca3;
            font-family: 'Consolas', monospace;
            font-size: 1em;
            text-align: center;
        }
        .coord-input:focus {
            outline: none;
            border-color: #e94560;
        }
        .region-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .region-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.8em;
            padding: 4px 8px;
            background: rgba(0,0,0,0.2);
            border-radius: 4px;
        }
        .region-label { color: #888; }
        .region-value { color: #ff6b6b; font-family: 'Consolas', monospace; }
        .input-row {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }
        .input-group { flex: 1; }
        .input-group label {
            display: block;
            color: #888;
            font-size: 0.7em;
            margin-bottom: 4px;
            text-transform: uppercase;
        }
        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            background: #0f0f1a;
            border: 1px solid #0f3460;
            border-radius: 6px;
            color: #eee;
            font-size: 0.9em;
        }
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #e94560;
        }
        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 0.85em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #e94560 0%, #c73659 100%);
            color: white;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #ff6b81 0%, #e94560 100%);
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }
        .btn-secondary {
            background: #0f3460;
            color: #4ecca3;
            border: 1px solid #0f3460;
        }
        .btn-secondary:hover {
            background: #1a4a7a;
            border-color: #4ecca3;
        }
        .output-box {
            background: #0f0f1a;
            border: 1px solid #0f3460;
            border-radius: 6px;
            padding: 12px;
            font-family: 'Consolas', monospace;
            font-size: 0.9em;
            color: #4ecca3;
            word-break: break-all;
            margin: 10px 0;
        }
        .quick-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
        }
        .quick-btn {
            padding: 10px 8px;
            background: #0f0f1a;
            border: 1px solid #0f3460;
            border-radius: 6px;
            color: #aaa;
            cursor: pointer;
            font-size: 0.75em;
            text-align: center;
            transition: all 0.2s;
        }
        .quick-btn:hover {
            border-color: #4ecca3;
            color: #4ecca3;
            background: rgba(78, 204, 163, 0.1);
        }
        .quick-btn small {
            display: block;
            color: #666;
            font-size: 0.85em;
            margin-top: 2px;
        }
        .plane-btns {
            display: flex;
            gap: 6px;
        }
        .plane-btn {
            flex: 1;
            padding: 10px;
            background: #0f0f1a;
            border: 1px solid #0f3460;
            border-radius: 6px;
            color: #888;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.2s;
        }
        .plane-btn:hover {
            border-color: #4ecca3;
            color: #4ecca3;
        }
        .plane-btn.active {
            background: #0f3460;
            border-color: #e94560;
            color: #e94560;
        }
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4ecca3;
            color: #1a1a2e;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10000;
        }
        .notification.show { opacity: 1; }
        .info-text {
            color: #666;
            font-size: 0.75em;
            margin-top: 8px;
            text-align: center;
        }
        .map-info {
            background: rgba(78, 204, 163, 0.1);
            border: 1px solid #4ecca3;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 15px;
            font-size: 0.8em;
            color: #4ecca3;
        }
        @media (max-width: 900px) {
            .main-content { flex-direction: column; }
            .map-container { height: 50vh; }
            .sidebar { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üó∫Ô∏è RS3 World Map Viewer</h1>
        <p>Interactive map with coordinate tools for scripting</p>
    </div>
    
    <div class="main-content">
        <div class="map-container">
            <iframe id="map-frame" src="https://mejrs.github.io/rs3?m=-1&z=2&p=0&x=3222&y=3218"></iframe>
        </div>
        
        <div class="sidebar">
            <div class="map-info">
                üí° <strong>Tip:</strong> The map shows live coordinates in the top-left corner. Click anywhere to see detailed position info!
            </div>
            
            <div class="section">
                <div class="section-title">üéØ Coordinate Calculator</div>
                <div class="coords-display">
                    <div class="coords-grid">
                        <div class="coord-box">
                            <div class="coord-label">X</div>
                            <input type="number" class="coord-input" id="coord-x" value="3222" onchange="updateAll()">
                        </div>
                        <div class="coord-box">
                            <div class="coord-label">Y</div>
                            <input type="number" class="coord-input" id="coord-y" value="3218" onchange="updateAll()">
                        </div>
                        <div class="coord-box">
                            <div class="coord-label">Plane</div>
                            <input type="number" class="coord-input" id="coord-plane" value="0" min="0" max="3" onchange="updateAll()">
                        </div>
                    </div>
                    <div class="region-info">
                        <div class="region-item">
                            <span class="region-label">Region:</span>
                            <span class="region-value" id="region-id">12850</span>
                        </div>
                        <div class="region-item">
                            <span class="region-label">Chunk:</span>
                            <span class="region-value" id="chunk-id">50, 50</span>
                        </div>
                        <div class="region-item">
                            <span class="region-label">Local:</span>
                            <span class="region-value" id="local-id">26, 2</span>
                        </div>
                        <div class="region-item">
                            <span class="region-label">MapSquare:</span>
                            <span class="region-value" id="mapsquare-id">50_50</span>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="goToCoords()" style="margin-top:12px;">üìç Go To These Coordinates</button>
            </div>
            
            <div class="section">
                <div class="section-title">üéöÔ∏è Plane Level</div>
                <div class="plane-btns">
                    <button class="plane-btn active" onclick="setPlane(0)">0</button>
                    <button class="plane-btn" onclick="setPlane(1)">1</button>
                    <button class="plane-btn" onclick="setPlane(2)">2</button>
                    <button class="plane-btn" onclick="setPlane(3)">3</button>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">üìã Output Format</div>
                <div class="input-group">
                    <select id="output-format" onchange="updateOutput()">
                        <option value="array">Array: [x, y, plane]</option>
                        <option value="worldpoint">WorldPoint(x, y, z)</option>
                        <option value="worldtile">new WorldTile(x, y, z)</option>
                        <option value="raw">Raw: x, y, plane</option>
                        <option value="region">Region ID only</option>
                    </select>
                </div>
                <div class="output-box" id="output-display">[3222, 3218, 0]</div>
                <div class="input-row">
                    <button class="btn btn-secondary" onclick="copyOutput()" style="flex:1;">üìã Copy</button>
                    <button class="btn btn-secondary" onclick="copyMapUrl()" style="flex:1;">üîó Copy Map URL</button>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">‚ö° Surface Locations</div>
                <div class="quick-grid">
                    <button class="quick-btn" onclick="goTo(3222,3218)">Lumbridge<small>3222, 3218</small></button>
                    <button class="quick-btn" onclick="goTo(3165,3484)">Grand Exchange<small>3165, 3484</small></button>
                    <button class="quick-btn" onclick="goTo(2965,3380)">Falador<small>2965, 3380</small></button>
                    <button class="quick-btn" onclick="goTo(2660,3305)">Ardougne<small>2660, 3305</small></button>
                    <button class="quick-btn" onclick="goTo(2208,3360)">Prifddinas<small>2208, 3360</small></button>
                    <button class="quick-btn" onclick="goTo(3484,3225)">Menaphos<small>3484, 3225</small></button>
                    <button class="quick-btn" onclick="goTo(3649,3342)">Anachronia<small>3649, 3342</small></button>
                    <button class="quick-btn" onclick="goTo(3088,3496)">Edgeville<small>3088, 3496</small></button>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">üèîÔ∏è Dungeons & Instances</div>
                <div class="quick-grid">
                    <button class="quick-btn" onclick="goTo(1249,6369)">War's Retreat<small>1249, 6369</small></button>
                    <button class="quick-btn" onclick="goTo(2879,5310)">GWD1<small>2879, 5310</small></button>
                    <button class="quick-btn" onclick="goTo(1184,6480)">GWD2 Heart<small>1184, 6480</small></button>
                    <button class="quick-btn" onclick="goTo(2970,9675)">Taverley Dung<small>2970, 9675</small></button>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">‚öîÔ∏è Boss Instances</div>
                <div class="quick-grid">
                    <button class="quick-btn" onclick="goTo(1166,6507)">Vindicta<small>1166, 6507</small></button>
                    <button class="quick-btn" onclick="goTo(1170,6597)">Helwyr<small>1170, 6597</small></button>
                    <button class="quick-btn" onclick="goTo(1203,6499)">Gregorovic<small>1203, 6499</small></button>
                    <button class="quick-btn" onclick="goTo(1139,6529)">Twin Furies<small>1139, 6529</small></button>
                    <button class="quick-btn" onclick="goTo(3037,6036)">Telos<small>3037, 6036</small></button>
                    <button class="quick-btn" onclick="goTo(2890,5205)">Nex<small>2890, 5205</small></button>
                    <button class="quick-btn" onclick="goTo(1152,6481)">Nex: AoD<small>1152, 6481</small></button>
                    <button class="quick-btn" onclick="goTo(3280,6060)">Araxxor<small>3280, 6060</small></button>
                </div>
            </div>
            
            <div class="info-text">
                Map tiles provided by <a href="https://mejrs.github.io" target="_blank" style="color:#4ecca3;">Mejrs</a>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">Copied!</div>
    
    <script>
        var currentPlane = 0;
        
        function getX() { return parseInt(document.getElementById('coord-x').value) || 0; }
        function getY() { return parseInt(document.getElementById('coord-y').value) || 0; }
        function getPlane() { return parseInt(document.getElementById('coord-plane').value) || 0; }
        
        function getRegionId(x, y) {
            var regionX = Math.floor(x / 64);
            var regionY = Math.floor(y / 64);
            return (regionX << 8) + regionY;
        }
        
        function updateAll() {
            var x = getX();
            var y = getY();
            
            document.getElementById('region-id').textContent = getRegionId(x, y);
            document.getElementById('chunk-id').textContent = Math.floor(x / 64) + ', ' + Math.floor(y / 64);
            document.getElementById('local-id').textContent = (x % 64) + ', ' + (y % 64);
            document.getElementById('mapsquare-id').textContent = Math.floor(x / 64) + '_' + Math.floor(y / 64);
            
            updateOutput();
        }
        
        function updateOutput() {
            var x = getX();
            var y = getY();
            var p = getPlane();
            var format = document.getElementById('output-format').value;
            var output = '';
            
            switch(format) {
                case 'array': output = '[' + x + ', ' + y + ', ' + p + ']'; break;
                case 'worldpoint': output = 'WorldPoint(' + x + ', ' + y + ', ' + p + ')'; break;
                case 'worldtile': output = 'new WorldTile(' + x + ', ' + y + ', ' + p + ')'; break;
                case 'raw': output = x + ', ' + y + ', ' + p; break;
                case 'region': output = String(getRegionId(x, y)); break;
            }
            
            document.getElementById('output-display').textContent = output;
        }
        
        function setPlane(p) {
            currentPlane = p;
            document.getElementById('coord-plane').value = p;
            document.querySelectorAll('.plane-btn').forEach(function(btn, i) {
                btn.classList.toggle('active', i === p);
            });
            updateAll();
            updateMapFrame();
        }
        
        function updateMapFrame() {
            var x = getX();
            var y = getY();
            var p = getPlane();
            document.getElementById('map-frame').src = 'https://mejrs.github.io/rs3?m=-1&z=2&p=' + p + '&x=' + x + '&y=' + y;
        }
        
        function goTo(x, y) {
            document.getElementById('coord-x').value = x;
            document.getElementById('coord-y').value = y;
            updateAll();
            updateMapFrame();
        }
        
        function goToCoords() {
            updateMapFrame();
        }
        
        function copyOutput() {
            var text = document.getElementById('output-display').textContent;
            navigator.clipboard.writeText(text).then(function() {
                showNotification('Copied to clipboard!');
            });
        }
        
        function copyMapUrl() {
            var x = getX();
            var y = getY();
            var p = getPlane();
            var url = 'https://mejrs.github.io/rs3?m=-1&z=2&p=' + p + '&x=' + x + '&y=' + y;
            navigator.clipboard.writeText(url).then(function() {
                showNotification('Map URL copied!');
            });
        }
        
        function showNotification(msg) {
            var el = document.getElementById('notification');
            el.textContent = msg;
            el.classList.add('show');
            setTimeout(function() { el.classList.remove('show'); }, 2000);
        }
        
        // Initialize
        updateAll();
    </script>
</body>
</html>
